<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>City Recommender ‚Äì Tourism Explorer</title>
  <link rel="stylesheet" href="/static/styles.css">

  <style>
    /*   Book Now links */
    .book-now-highlight {
      background: linear-gradient(135deg, #ff416c, #ff4b2b);
      color: #fff !important;
      padding: 8px 16px;
      border-radius: 30px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    .book-now-highlight:hover {
      transform: scale(1.08);
      background: linear-gradient(135deg, #ff4b2b, #ff416c);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
    }

    /*  Hero CTA Book  */
    .hero .cta-row .btn.book-now-cta {
      background: linear-gradient(135deg, #ff9966, #ff5e62);
      color: #fff;
      font-weight: 600;
      padding: 12px 24px;
      border-radius: 35px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      animation: pulse 2s infinite;
    }
    .hero .cta-row .btn.book-now-cta:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.35);
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255,94,98,0.6); }
      70% { box-shadow: 0 0 0 15px rgba(255,94,98,0); }
      100% { box-shadow: 0 0 0 0 rgba(255,94,98,0); }
    }

    .settings-menu {
      display: none;
      position: absolute;
      right: 10px;
      top: 50px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    body.dark-mode {
      background-color: #121212 !important;
      color: #e0e0e0 !important;
    }
    body.dark-mode header,
    body.dark-mode footer,
    body.dark-mode section {
      background-color: #1e1e1e !important;
      color: #e0e0e0 !important;
    }

    /* Recommendation results */
    .results {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .city-card {
      padding: 8px 12px;
      border-radius: 10px;
      background-color: #f0f0f0;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .city-card:hover {
      background-color: #ff7a50;
      color: white;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <!-- Header with settings -->
  <header class="site-header">
    <div class="header-inner">
      <div class="logo">NAMASTE INDIA</div>
      <nav class="main-nav" aria-label="Main navigation">
        <a href="#features">Features</a>
        <a href="#featured">Destinations</a>
        <a href="#travel-guides">Travel Tips</a>
        <a href="#booking" class="book-now-highlight">Book Now</a>
        <a href="#newsletter">Newsletter</a>
      </nav>
      <div class="header-actions">
        <div id="auth-area">
          <a class="btn btn-ghost" href="/login">Login</a>
          <a class="btn btn-primary" href="/signup">Sign up</a>
        </div>
        <button id="settings-btn" aria-label="Settings">‚öôÔ∏è</button>
        <button id="mobile-nav-toggle" class="mobile-only" aria-label="Open menu">‚ò∞</button>
      </div>
    </div>
    <div id="settings-menu" class="settings-menu hidden" aria-hidden="true">
      <label><input type="checkbox" id="dark-toggle"> Dark Mode</label>
      <div class="zoom-controls">
        <button id="zoom-in">Zoom In</button>
        <button id="zoom-out">Zoom Out</button>
      </div>
    </div>
  </header>

  <!-- Hero + Recommender card -->
  <section class="hero">
    <div class="hero-inner container">
      <div class="hero-copy">
        <h1>Find your next unforgettable city trip</h1>
        <p>Discover similar cities based on curated travel data, duration and best times to visit.</p>
        <div class="cta-row">
          <a class="btn btn-primary" href="#recommender">Try the Recommender</a>
          <a class="btn btn-ghost" href="#featured">Explore Destinations</a>
          <a class="btn book-now-cta" href="#booking">Book Now</a>
        </div>
      </div>
      <div class="hero-card" id="recommender">
        <h2>City Recommender</h2>
        <p class="muted">Get tailored suggestions in seconds</p>
        <div class="form">
          <input id="city-input" placeholder="Enter city name" aria-label="City name">
          <input id="topn-input" type="number" value="5" min="1" max="20" aria-label="Top N">
          <button id="go" class="btn btn-primary">Recommend</button>
        </div>
        <div id="status" class="status">Ready</div>
        <div id="results" class="results"></div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="container features">
    <h2>Why use City Recommender?</h2>
    <div class="feature-grid">
      <div class="feature">
        <h3>Smart suggestions</h3>
        <p>Find cities with similar travel vibes, durations and best visiting times.</p>
      </div>
      <div class="feature">
        <h3>Curated data</h3>
        <p>We combine local highlights, travel times and seasonal tips.</p>
      </div>
      <div class="feature">
        <h3>Simple UI</h3>
        <p>Quick lookups and a friendly interface ‚Äî travel planning made easy.</p>
      </div>
    </div>
  </section>

  <!-- Featured Destinations -->
  <section id="featured" class="featured container">
    <h2>Top Attractions</h2>
    <div class="grid">
      <!-- Cities -->
      <article class="card">
        <div class="card-media"><a href="/kolkata"><img src="/static/images/kolkata.jpg" alt="Kolkata"></a></div>
        <div class="card-body"><h3>Kolkata</h3><p>The city of joy</p><br><br><button class="btn btn-secondary" onclick="window.location.href='/kolkata'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/varanasi"><img src="/static/images/varanasi.jpg" alt="Varanasi"></a></div>
        <div class="card-body"><h3>Varanasi</h3><p>Where spirituality meets eternity</p><br><button class="btn btn-secondary" onclick="window.location.href='/varanasi'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/goa"><img src="/static/images/goa.jpg" alt="Goa"></a></div>
        <div class="card-body"><h3>Goa</h3><p>Beaches, nightlife, and fun</p><br><button class="btn btn-secondary" onclick="window.location.href='/goa'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/mumbai"><img src="/static/images/mumbai.jpg" alt="Mumbai"></a></div>
        <div class="card-body"><h3>Mumbai</h3><p>City of dreams and Bollywood vibes</p><br><button class="btn btn-secondary" onclick="window.location.href='/mumbai'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/shimla"><img src="/static/images/shimla.jpg" alt="Shimla"></a></div>
        <div class="card-body"><h3>Shimla</h3><p>Queen of Hills</p><br><br><button class="btn btn-secondary" onclick="window.location.href='/shimla'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/chennai"><img src="/static/images/chennai.jpg" alt="Chennai"></a></div>
        <div class="card-body"><h3>Chennai</h3><p>Gateway to South Indian Culture</p><br><button class="btn btn-secondary" onclick="window.location.href='/chennai'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/jaipur"><img src="/static/images/jaipur.jpg" alt="Jaipur"></a></div>
        <div class="card-body"><h3>Jaipur</h3><p>The pink City of palaces and traditions</p><br><button class="btn btn-secondary" onclick="window.location.href='/jaipur'">Explore</button></div>
      </article>
      <article class="card">
        <div class="card-media"><a href="/delhi"><img src="/static/images/delhi.jpg" alt="Delhi"></a></div>
        <div class="card-body"><h3>Delhi</h3><p>Where history meets modern India</p><br><button class="btn btn-secondary" onclick="window.location.href='/delhi'">Explore</button></div>
      </article>
    </div>
  </section>
 <br><br><br>

  <!-- Travel Tips & Guides -->
  <section id="travel-guides" class="guides container">
    <div class="guide-grid">
      <a href="/tips" class="guide-card"><h3>How to Pack Light for City Trips</h3><p>Essentials and space-saving tips for smarter travel.</p></a>
      <a href="/time" class="guide-card"><h3>Best Times to Visit Shimla</h3><p>Seasonal highlights and crowd tips.</p></a>
      <a href="/market" class="guide-card"><h3>Top 10 Food Spots in Kolkata</h3><p>Local favorites and bustling markets.</p></a>
    </div>
  </section>
  <br><br><br>

  <!-- Travel Booking Section -->
  <section id="booking" class="container booking">
    <h2 style="text-align:center; margin-bottom:20px;">Book Now</h2>
    <div class="booking-card" style="max-width:850px; margin:auto; padding:30px; border-radius:16px; background:linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); box-shadow:0 6px 20px rgba(0,0,0,0.15); transition:transform 0.3s;">
      <div class="services" style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-bottom:25px;">
        <button type="button" class="service-btn">‚úàÔ∏è Flights</button>
        <button type="button" class="service-btn">üöÜ Trains</button>
        <button type="button" class="service-btn">üöå Buses</button>
      </div>

      <form class="booking-form" style="display:grid; gap:16px;">
        <div style="display:flex; align-items:center; gap:12px;">
          <select id="fromInput" required>
            <option value="">From</option>
            <option value="Kolkata">Kolkata</option>
            <option value="Mumbai">Mumbai</option>
            <option value="Delhi">Delhi</option>
            <option value="Chennai">Chennai</option>
            <option value="Goa">Goa</option>
            <option value="Jaipur">Jaipur</option>
            <option value="Shimla">Shimla</option>
            <option value="Varanasi">Varanasi</option>
          </select>

          <button type="button" id="swapBtn" class="btn btn-secondary">‚áÑ</button>

          <select id="toInput" required>
            <option value="">To</option>
            <option value="Kolkata">Kolkata</option>
            <option value="Mumbai">Mumbai</option>
            <option value="Delhi">Delhi</option>
            <option value="Chennai">Chennai</option>
            <option value="Goa">Goa</option>
            <option value="Jaipur">Jaipur</option>
            <option value="Shimla">Shimla</option>
            <option value="Varanasi">Varanasi</option>
          </select>
        </div>

        <input type="date" required>
        <select>
          <option>1 Traveler</option>
          <option>2 Travelers</option>
          <option>3 Travelers</option>
        </select>
        <select>
          <option>Economy</option>
          <option>Business</option>
        </select>

        <button type="submit" class="btn btn-primary">Search</button>
      </form>

      <div class="fare-types" style="margin-top:20px; display:flex; flex-wrap:wrap; gap:16px; justify-content:center;">
        <label><input type="radio" name="fare" checked> Regular</label>
        <label><input type="radio" name="fare"> Armed Forces</label>
        <label><input type="radio" name="fare"> Student</label>
        <label><input type="radio" name="fare"> Senior</label>
        <label><input type="radio" name="fare"> Doctors & Nurses</label>
      </div>
    </div>
  </section>

  <!-- Swap From ‚Üî To + Settings + Recommender + Login Display -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Swap button
      const fromSelect = document.getElementById("fromInput");
      const toSelect = document.getElementById("toInput");
      const swapBtn = document.getElementById("swapBtn");
      swapBtn.addEventListener("click", () => {
        const temp = fromSelect.value;
        fromSelect.value = toSelect.value;
        toSelect.value = temp;
      });

      // Settings menu
      const settingsBtn = document.getElementById("settings-btn");
      const settingsMenu = document.getElementById("settings-menu");
      const darkToggle = document.getElementById("dark-toggle");
      const zoomInBtn = document.getElementById("zoom-in");
      const zoomOutBtn = document.getElementById("zoom-out");
      let zoomLevel = 1;

      settingsBtn.addEventListener("click", () => {
        settingsMenu.style.display = settingsMenu.style.display === "block" ? "none" : "block";
      });
      document.addEventListener("click", (e) => {
        if (!settingsBtn.contains(e.target) && !settingsMenu.contains(e.target)) {
          settingsMenu.style.display = "none";
        }
      });
      darkToggle.addEventListener("change", () => {
        document.body.classList.toggle("dark-mode", darkToggle.checked);
      });
      zoomInBtn.addEventListener("click", () => {
        zoomLevel += 0.1;
        document.body.style.transform = `scale(${zoomLevel})`;
        document.body.style.transformOrigin = "0 0";
      });
      zoomOutBtn.addEventListener("click", () => {
        zoomLevel = Math.max(0.5, zoomLevel - 0.1);
        document.body.style.transform = `scale(${zoomLevel})`;
        document.body.style.transformOrigin = "0 0";
      });

      // Recommendation System
      const cities = {
        Kolkata: ["Varanasi", "Jaipur", "Shimla", "Delhi", "Goa"],
        Mumbai: ["Goa", "Delhi", "Chennai", "Jaipur", "Shimla"],
        Delhi: ["Jaipur", "Varanasi", "Shimla", "Mumbai", "Goa"],
        Chennai: ["Goa", "Mumbai", "Shimla", "Jaipur", "Kolkata"],
        Goa: ["Mumbai", "Chennai", "Delhi", "Shimla", "Varanasi"],
        Jaipur: ["Delhi", "Kolkata", "Varanasi", "Shimla", "Goa"],
        Shimla: ["Jaipur", "Varanasi", "Delhi", "Goa", "Mumbai"],
        Varanasi: ["Kolkata", "Jaipur", "Delhi", "Shimla", "Goa"]
      };

      const goBtn = document.getElementById("go");
      const cityInput = document.getElementById("city-input");
      const topnInput = document.getElementById("topn-input");
      const resultsDiv = document.getElementById("results");
      const statusDiv = document.getElementById("status");

      goBtn.addEventListener("click", () => {
        const city = cityInput.value.trim();
        const topN = parseInt(topnInput.value);
        resultsDiv.innerHTML = "";

        if (!city) {
          statusDiv.textContent = "Please enter a city name.";
          return;
        }

        const cityKey = city.charAt(0).toUpperCase() + city.slice(1).toLowerCase();
        if (!cities[cityKey]) {
          statusDiv.textContent = "City not found. Try another city.";
          return;
        }

        statusDiv.textContent = "Recommendations:";
        const recommended = cities[cityKey].slice(0, topN);
        recommended.forEach(c => {
          const card = document.createElement("div");
          card.className = "city-card";
          card.textContent = c;
          card.onclick = () => window.location.href = `/${c.toLowerCase()}`;
          resultsDiv.appendChild(card);
        });
      });

      //  Auth UI Update and Logout
      const authArea = document.getElementById('auth-area');

      function setLoggedInUI(username) {
        authArea.innerHTML = 
          '<span class="muted" style="margin-right:12px">Hi, ' + 
          escapeHtml(username) + 
          '</span>' +
          '<a class="btn btn-ghost" id="logout-btn" href="#">Logout</a>';

        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', function (e) {
            e.preventDefault();
            localStorage.removeItem('username');
            window.location.href = '/';
          });
        }
      }

      function escapeHtml(s) {
        return String(s).replace(/[&<>"']/g, function (m) {
          return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];
        });
      }

      const stored = localStorage.getItem('username');
      if (stored) {
        setLoggedInUI(stored);
        return;
      }

      fetch('/auth/status', { credentials: 'same-origin' })
        .then(r => { if (!r.ok) throw new Error('no status'); return r.json(); })
        .then(j => {
          if (j && j.loggedIn) {
            const user = j.username || j.user || j.name || '';
            if (user) localStorage.setItem('username', user);
            setLoggedInUI(user);
          }
        })
        .catch(() => {});
    });
  </script>

  <!-- Newsletter -->
  <section id="newsletter" class="newsletter container">
    <h2>Stay in the loop</h2>
    <p class="muted">Sign up for curated destination picks and travel tips.</p>
    <form class="newsletter-form" onsubmit="event.preventDefault(); alert('Thanks ‚Äî demo signup');">
      <input type="email" placeholder="Your email" required aria-label="Your email">
      <button class="btn btn-primary">Subscribe</button>
    </form>
  </section>

 <!-- Chatbot Toggle Button  -->
<div id="chatbot-toggle">‚òÅÔ∏è Need Help?</div>

<!-- Chatbot Widget (Hidden by default) -->
<div id="chatbot">
  <div id="chatbot-header">
    üí¨ Travel Assistant
    <span id="chatbot-close">‚úñ</span>
  </div>
  <div id="chatbot-messages"></div>
  <div id="chatbot-input">
    <input type="text" id="chatbot-text" placeholder="Ask me about cities, bookings, or tips...">
    <button id="chatbot-send">Send</button>
  </div>
</div>

<style>
/* Floating cloud button */
#chatbot-toggle {
  position: fixed;
  bottom: 25px;
  right: 25px;
  background: #ffffff;
  border-radius: 50px;
  padding: 14px 18px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition: transform 0.2s, box-shadow 0.2s;
  z-index: 9999;
}
#chatbot-toggle:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}

/* Chatbot container */
#chatbot {
  position: fixed;
  bottom: 80px;
  right: 25px;
  width: 360px;
  max-height: 500px;
  display: none;
  flex-direction: column;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.25);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden;
  z-index: 9998;
}

/* Header */
#chatbot-header {
  background: linear-gradient(135deg, #ff7e5f, #feb47b);
  color: #fff;
  padding: 12px 16px;
  font-weight: bold;
  font-size: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
#chatbot-close {
  cursor: pointer;
  font-weight: normal;
  transition: color 0.2s;
}
#chatbot-close:hover {
  color: #000;
}

/* Messages area */
#chatbot-messages {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
  background: #f5f5f5;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Message bubbles */
.chatbot-msg {
  padding: 10px 14px;
  border-radius: 18px;
  max-width: 75%;
  word-wrap: break-word;
  line-height: 1.4;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.user-msg {
  background: #007bff;
  color: #fff;
  align-self: flex-end;
}
.bot-msg {
  background: #eaeaea;
  color: #222;
  align-self: flex-start;
}

/* Input area */
#chatbot-input {
  display: flex;
  border-top: 1px solid #ddd;
  background: #fafafa;
}
#chatbot-input input {
  flex: 1;
  border: none;
  padding: 12px;
  font-size: 14px;
  outline: none;
}
#chatbot-input button {
  background: #ff7e5f;
  border: none;
  color: #fff;
  padding: 0 18px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s;
}
#chatbot-input button:hover {
  background: #feb47b;
}

/* Smooth scroll for messages */
#chatbot-messages::-webkit-scrollbar {
  width: 6px;
}
#chatbot-messages::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.2);
  border-radius: 3px;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const chatbot = document.getElementById("chatbot");
  const toggleBtn = document.getElementById("chatbot-toggle");
  const closeBtn = document.getElementById("chatbot-close");
  const input = document.getElementById("chatbot-text");
  const sendBtn = document.getElementById("chatbot-send");
  const messagesDiv = document.getElementById("chatbot-messages");

  // Toggle chatbot visibility
  toggleBtn.addEventListener("click", () => {
    chatbot.style.display = chatbot.style.display === "flex" ? "none" : "flex";
    chatbot.style.flexDirection = "column";
  });

  // Close button
  closeBtn.addEventListener("click", () => {
    chatbot.style.display = "none";
  });

  function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = "chatbot-msg " + (sender === "user" ? "user-msg" : "bot-msg");
    msg.innerText = text;
    messagesDiv.appendChild(msg);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function sendMessage() {
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";

    fetch("/chatbot", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({message: text})
    })
    .then(res => res.json())
    .then(data => addMessage(data.reply, "bot"))
    .catch(() => addMessage("‚ùå Error connecting to chatbot.", "bot"));
  }

  sendBtn.addEventListener("click", sendMessage);
  input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });
});
</script>



  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-col about-us">
        <h3>About Us</h3>
        <p>Discover India‚Äôs cities with ease. Our platform shares trusted guides and hidden gems, and our smart City Recommendation System suggests destinations tailored to your interests. From mountain escapes to coastal retreats, start your next adventure here..</p>
      </div>
      <div class="footer-col links">
        <h3>Support & Quick Links</h3>
        <ul>
          <li><a href="#">Help Center</a></li>
          <li><a href="#">FAQ</a></li>
          <li><a href="#">Terms</a></li>
          <li><a href="#">Privacy</a></li>
        </ul>
      </div>
      <div class="footer-col contact">
        <h3>NAMASTE INDIA</h3>
        <p>123 Travel Lane<br>Kolkata, India 110001</p>
        <p>Email: <a href="mailto:namasteindia.atyourservice@gmail.com">namasteindia.atyourservice@gmail.com</a></p>
        <p>Phone: +91 62918 73457</p>
      </div>
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <div style="text-align:center; margin-top:30px;">
      <h2>Follow us on</h2>
      <div class="social-icons" style="margin-top:12px; display:flex; justify-content:center; gap:20px; font-size:20px;">
        <i class="fab fa-facebook-f" style="color:#3b5998;"></i>
        <i class="fab fa-twitter" style="color:#1da1f2;"></i>
        <i class="fab fa-instagram" style="color:#e1306c;"></i>
        <i class="fab fa-linkedin-in" style="color:#0077b5;"></i>
      </div>
    </div>

    <div class="container" style="margin-top:16px; text-align:center; opacity:0.8; font-size:0.9rem">¬© 2025 City Recommender</div>
  </footer>
</body>
</html>
